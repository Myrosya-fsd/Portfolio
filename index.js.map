{"version":3,"file":"index.js","sources":["../src/js/footer.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const form = document.querySelector('.footer-form');\n  const emailInput = document.getElementById('user-email');\n  const commentInput = document.getElementById('user-comments');\n  const modal = document.querySelector('.backdrop');\n  const closeModalBtn = document.querySelector('.modal-close');\n  const overlay = document.querySelector('.backdrop');\n  const footerContact = document.querySelector('.footer-contact');\n\n  modal.classList.remove('is-open');\n\n  function toggleModal(show) {\n    modal.classList.toggle('is-open', show);\n    document.body.style.overflow = show ? 'hidden' : 'auto';\n  }\n\n  let message = document.createElement('p');\n  message.classList.add('email-validation-message');\n  message.style.textAlign = 'left';\n  form.insertAdjacentElement('beforeend', message);\n\n  function showValidationMessage(isValid) {\n    if (isValid) {\n      emailInput.style.borderBottom = '1px solid #3cbc81';\n      message.textContent = 'Success!';\n      message.style.color = '#3cbc81';\n    } else {\n      emailInput.style.borderBottom = '1px solid #e74a3b';\n      message.textContent = 'Invalid email, try again';\n      message.style.color = '#e74a3b';\n    }\n  }\n\n  function isValidEmail(email) {\n    const emailPattern = /^\\w+(\\.\\w+)?@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/;\n    return emailPattern.test(email);\n  }\n\n  emailInput.addEventListener('input', function () {\n    showValidationMessage(isValidEmail(emailInput.value.trim()));\n  });\n\n  commentInput.addEventListener('input', function () {\n    if (this.value.length > 50) {\n      this.value = this.value.slice(0, 50) + '...';\n    }\n  });\n\n  function closeModal() {\n    overlay.classList.remove('is-open');\n    document.documentElement.classList.remove('is-lock');\n    window.location.reload();\n  }\n\n  closeModalBtn.addEventListener('click', closeModal);\n\n  overlay.addEventListener('click', event => {\n    if (event.target === overlay) {\n      closeModal();\n    }\n  });\n\n  document.addEventListener('keydown', event => {\n    if (event.key === 'Escape' && modal.classList.contains('is-open')) {\n      closeModal();\n    }\n  });\n\n  form.addEventListener('submit', async function (event) {\n    event.preventDefault();\n\n    if (!isValidEmail(emailInput.value.trim())) {\n      showValidationMessage(false);\n      return;\n    }\n\n    const formData = {\n      email: emailInput.value,\n      comment: commentInput.value,\n    };\n\n    try {\n      await axios.post(\n        'https://portfolio-js.b.goit.study/api/requests',\n        formData,\n        {\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        }\n      );\n\n      toggleModal(true);\n      form.reset();\n      message.textContent = '';\n    } catch (error) {\n      let errorMessage =\n        'Error sending application. Please check the entered data and try again.';\n      if (error.response) {\n        errorMessage += ` Error code: ${error.response.status}`;\n      } else if (error.request) {\n        errorMessage += ' Network problem.';\n      }\n      iziToast.error({\n        title: 'Error',\n        message: errorMessage,\n      });\n      console.error('Error:', error);\n    }\n  });\n});\n"],"names":["form","emailInput","commentInput","modal","closeModalBtn","overlay","toggleModal","show","message","showValidationMessage","isValid","isValidEmail","email","closeModal","event","formData","axios","error","errorMessage","iziToast"],"mappings":"6vBAIA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAe,SAAS,eAAe,eAAe,EACtDC,EAAQ,SAAS,cAAc,WAAW,EAC1CC,EAAgB,SAAS,cAAc,cAAc,EACrDC,EAAU,SAAS,cAAc,WAAW,EAC5B,SAAS,cAAc,iBAAiB,EAE9DF,EAAM,UAAU,OAAO,SAAS,EAEhC,SAASG,EAAYC,EAAM,CACzBJ,EAAM,UAAU,OAAO,UAAWI,CAAI,EACtC,SAAS,KAAK,MAAM,SAAkB,QACvC,CAED,IAAIC,EAAU,SAAS,cAAc,GAAG,EACxCA,EAAQ,UAAU,IAAI,0BAA0B,EAChDA,EAAQ,MAAM,UAAY,OAC1BR,EAAK,sBAAsB,YAAaQ,CAAO,EAE/C,SAASC,EAAsBC,EAAS,CAClCA,GACFT,EAAW,MAAM,aAAe,oBAChCO,EAAQ,YAAc,WACtBA,EAAQ,MAAM,MAAQ,YAEtBP,EAAW,MAAM,aAAe,oBAChCO,EAAQ,YAAc,2BACtBA,EAAQ,MAAM,MAAQ,UAEzB,CAED,SAASG,EAAaC,EAAO,CAE3B,MADqB,2CACD,KAAKA,CAAK,CAC/B,CAEDX,EAAW,iBAAiB,QAAS,UAAY,CAC/CQ,EAAsBE,EAAaV,EAAW,MAAM,KAAI,CAAE,CAAC,CAC/D,CAAG,EAEDC,EAAa,iBAAiB,QAAS,UAAY,CAC7C,KAAK,MAAM,OAAS,KACtB,KAAK,MAAQ,KAAK,MAAM,MAAM,EAAG,EAAE,EAAI,MAE7C,CAAG,EAED,SAASW,GAAa,CACpBR,EAAQ,UAAU,OAAO,SAAS,EAClC,SAAS,gBAAgB,UAAU,OAAO,SAAS,EACnD,OAAO,SAAS,QACjB,CAEDD,EAAc,iBAAiB,QAASS,CAAU,EAElDR,EAAQ,iBAAiB,QAASS,GAAS,CACrCA,EAAM,SAAWT,GACnBQ,GAEN,CAAG,EAED,SAAS,iBAAiB,UAAWC,GAAS,CACxCA,EAAM,MAAQ,UAAYX,EAAM,UAAU,SAAS,SAAS,GAC9DU,GAEN,CAAG,EAEDb,EAAK,iBAAiB,SAAU,eAAgBc,EAAO,CAGrD,GAFAA,EAAM,eAAc,EAEhB,CAACH,EAAaV,EAAW,MAAM,KAAM,CAAA,EAAG,CAC1CQ,EAAsB,EAAK,EAC3B,MACD,CAED,MAAMM,EAAW,CACf,MAAOd,EAAW,MAClB,QAASC,EAAa,KAC5B,EAEI,GAAI,CACF,MAAMc,EAAM,KACV,iDACAD,EACA,CACE,QAAS,CACP,eAAgB,kBACjB,CACF,CACT,EAEMT,EAAY,EAAI,EAChBN,EAAK,MAAK,EACVQ,EAAQ,YAAc,EACvB,OAAQS,EAAO,CACd,IAAIC,EACF,0EACED,EAAM,SACRC,GAAgB,gBAAgBD,EAAM,SAAS,MAAM,GAC5CA,EAAM,UACfC,GAAgB,qBAElBC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,CACjB,CAAO,EACD,QAAQ,MAAM,SAAUD,CAAK,CAC9B,CACL,CAAG,CACH,CAAC"}